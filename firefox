#!/bin/sh

# Some preferences in Firefox that should be modified before using this script
# The script kills the browser's process in OSX, Firefox thinks it has crashed
# This is to prevent tabs from building up when running large batches of sites
# The utility GetWindowID is used in this script https://github.com/smokris/GetWindowID

# browser.sessionstore.max_resumed_crashes
# browser.sessionstore.resume_from_crash
# toolkit.startup.max_resumed_crashes
# browser.tabs.crashReporting.sendReport

h=$"http://"
list=(Baidu.com Qq.com Taobao.com Sina.com.cn Weibo.com Hao123.com Gmw.cn Tmall.com 360.cn Sohu.com Chinadaily.com.cn Jd.com Tianya.cn Soso.com Xinhuanet.com Cntv.cn Google.com Youth.cn Google.com.hk 360.com 163.com Haosou.com Youku.com Sogou.com Alipay.com Amazon.cn China.com China.com.cn Bilibili.com Detail.tmall.com Tudou.com So.com Cnzz.com Zhihu.com Bing.com Ifeng.com Iqiyi.com Zol.com.cn Amazon.com 51.la Babytree.com Douyu.com Google.cn Xywy.com Huanqiu.com Yesky.com Bitauto.com Caijing.com.cn 1688.com 1905.com map.baidu.com news.ifeng.com movie.douban.com news.sina.com.cn news.qq.com news.163.com tianya.cn sports.sina.com.cn yidianzixun.com sports.qq.com news.baidu.comMama.cn Csdn.net 39.net 51yes.com Cnnic.cn Enet.com.cn Eastday.com Alibaba.com Microsoft.com Youtube.com Xcar.com.cn K618.cn Github.com Facebook.com Suning.com Yahoo.com Acfun.tv Ci123.com 17ok.com Rednet.cn Cnblogs.com Adidas.tmall.com Panda.tv Gamersky.com Baike.com Chaoshi.tmall.com List.tmall.com Huaban.com Watsons.tmall.com Sq.cn Yaolan.com Apple.com Wikipedia.org Youdao.com Cnmo.com Alexa.cn 123cha.com Youboy.com Live.com Jrj.com.cn Aliyun.com Xunlei.com Voc.com.cn Chinaso.com Le.com 4399.com Oeeee.com Quanjing.com Chinaz.com Buy.tmall.com Kdnet.net Zhanqi.tv 58.com Stockstar.com 3dmgame.com 51sole.com Alicdn.com Aliexpress.com 126.com Cctv.com To8to.com Google.co.jp Familydoctor.com.cn Icolor.com.cn Niuche.com Egou.com Linkedin.com 360doc.com Qingdaonews.com Epwk.com Ctrip.com Duowan.com Mi.com Amazon.co.jp Chekb.com Dianping.com Jiameng.com Workercn.cn 21cn.com Ngacn.cc Stackoverflow.com Twitter.com Tgbus.com Takungpao.com Zhaopin.com Gongchang.com Oschina.net Amazon.co.uk Yhd.com Docin.com Douban.com Fanli.com Zhibo8.cc Ccb.com Jb51.net Etao.com Caixin.com Hupu.com Pchome.net Eastmoney.com Zimuzu.tv Ynet.com Duba.com Msn.com Cdstm.cn Ebay.com V1.cn Dangdang.com Ali213.net Pages.tmall.com Quanmin.tv 10086.cn Feng.com Toutiao.com Mydrivers.com 17173.com Chiphell.com Jqw.com Admaimai.com P5w.net Yiqifa.com G4d7.com Bttiantang.com Xiami.com Cankaoxiaoxi.com Chooseauto.com.cn Adobe.com Gexing.com 12306.cn Amazon.de Trade.tmall.com Eol.cn Huya.com Battlenet.com.cn Steampowered.com Cnki.net Jd.hk Southcn.com Mp4ba.com Hexun.com Baiducontent.com 51cto.com Doc88.com Cnbeta.com Renren.com Sznews.com Alimama.com Dytt8.net Pinterest.com 189.cn 178.com Qidian.com Ithome.com W3school.com.cn Focus.cn Gome.com.cn Vip.com Nipic.com Baomihua.com Chengdu.cn 58pic.com Yunpan.cn 365jia.cn Baimao.com Bzw315.com Jmw.com.cn Ccidnet.com Ccb.com.cn Meituan.com Smzdm.com 5dcar.com Mgtv.com Btime.com Boc.cn Blizzard.cn Oracle.com Mtime.com 1111.tmall.com Google.com.tw Ku6.com Yxdown.com Xiaomi.com Pps.tv Github.io Newsmth.net 07073.com Ems.com.cn Scol.com.cn Lady8844.com Weather.com.cn Dxy.cn Paypal.com Dy2018.com Zcool.com.cn 39yst.com Tmall.hk Login.tmall.com Huihui.cn 17k.com Gfan.com Pc6.com Dix3.com Steamcommunity.com Iciba.com Skycn.com Tumblr.com Viidii.info Cyol.com Taoche.com Joyme.com Yahoo.co.jp Icbc.com.cn Ebrun.com Alitrip.com Aizhan.com Jianshu.com Duomai.com 28.com 18183.com Chsi.com.cn Alibaba-inc.com Cr173.com Xueqiu.com Huawei.com Miui.com Lofter.com Anjuke.com Atpanel.com Reddit.com House365.com 7k7k.com Cmbchina.com Meishichina.com Dmzj.com Segmentfault.com Ch.com Fudan.edu.cn Nga.cn Instagram.com 19lou.com Autohome.com.cn 51auto.com Fengniao.com Ttmeiju.com Jxnews.com.cn Tuicool.com Cnhubei.com Jjwxc.net Juooo.com Netcoc.com Onlinedown.net Nuomi.com Jiemian.com Guokr.com Biquge.la 360kan.com Ycwb.com Makepolo.com Mplife.com 10010.com Jandan.net Sf-express.com Wangtu.com Chinaunix.net Ceconline.com Huomaotv.cn Nih.gov Tower.im Yjbys.com Sinaimg.cn Xjtour.com Xdf.cn Guancha.cn Goldcarpet.cn 6pm.com Wtoip.com Yinyuetai.com 99114.com Fungo.cn Ifanr.com Lagou.com Iiyi.com Jia360.com Yinhang.com 3158.cn Vmall.com Znds.com Umeng.com Kafan.cn Xiamp4.com Ea3w.com Ilady.com.cn Zaobao.com Modernweekly.com Kuwo.cn 3dwwwgame.com Sonhoo.com 17jg.com T66y.com 114la.com V2ex.com Miaopai.com Loldytt.com Cnr.cn Pixiv.net Jjyyfsdowns.net Xitek.com Dwnews.com Csair.com Xiu.com Liepin.com Dilidili.com A9vg.com Kaixin001.com Kuaidi100.com Office.com Kaola.com Cyzone.cn Netease.com Bigccq.cn Liul.net Tuikuan.tmall.com Globaltimes.cn Gusuwang.com Sdo.com Cn163.net 2cto.com Mozilla.org Meizu.com Go.com Kat.cr Kugou.com Verycd.com Avmo.pw Ynepb.gov.cn Chinanetrank.com Gucheng.com Wankr.com.cn Appgame.com Gao7.com Lianjia.com Oa.com Cs.com.cn Booking.com 115.com Dygang.com 618.tmall.com Fang.com Zbj.com Longzhu.com 52pojie.cn 16888.com Pcbeta.com 36kr.com Pptv.com 10jqka.com.cn 91jm.com Weitainet.com Cityhouse.cn Xiaomi.cn Wanfangdata.com.cn Ratewrite.tmall.com Eelly.com Sourceforge.net Zealer.com Chuandong.com Jiayuan.com Winshang.com Lenovo.com.cn Runoob.com Blog.163.com Antpedia.com U17.com Win007.com 176.com Ikea.com Jdhg.com Go108.com.cn Jkj9.com Doubleclick.net Wordpress.com Blogspot.com Yinxiang.com Yohogirls.com 55haitao.com Bbc.com Cepin.com Kdslife.com Uc.cn 17track.net Qinqinbaby.com Steamcn.com Pcauto.com.cn Liansuo.com Btso.pw Weibo.cn 51hejia.com Hudong.com Seedit.com Imooc.com Zuanke8.com Watchtimes.com.cn Chaduo.com I1515.com Zxart.cn 258.com Photofans.cn Salesforce.com Engadget.com Exam8.com Cncn.org.cn Wenkang.cn Forex.com.cn Dahe.cn Jiyoujia.com Pcbaby.com.cn Worktile.com Mr-world.com Sanguosha.com 6vhao.com Sggc.com.cn Miercn.com Bozhong.com Zhcw.com Weiyun.com Yiwugou.com D1ev.com Beiii.com 56.com Ly.com Dv37.com Techweb.com.cn T.co Vip.tmall.com Jiwu.com Microsoftonline.com Jdpay.com Banma.com Ingdan.com Shlandscape.com Amazon.fr Hebei.com.cn Qyer.com Kongzhong.com Youxiduo.com Beva.com 51fashion.com.cn Cheaa.com Cjn.cn Tsinghua.edu.cn);

for i in "${!list[@]}"; do
      echo "Open new browser window";
      open -a "Firefox"; # Open Firefox
      sleep 4; # Wait for browser to load
      echo "Get window ID for screenshot";
      gcwindow=$(./GetWindowID "Firefox" "Mozilla Firefox"); # Window ID is needed for screenshot, current ID depends on what your start page is set to
      echo $gcwindow;
      site="${list[$i]}";
      sleep 1; # Not sure this pause is needed anymore
      echo "Opening Site #"$i;
      echo $site;
      address=$h$site;
      open -a "Firefox" $address; # Open the address in Firefox
      echo "Wait for page load..";
      # Screencapture has a timer built in, 40 seconds in this case, adjust this and path as required
      # If testing pages other than domain root change $site to something else like $i for example
      screencapture -t jpg -T 40 -l $gcwindow -x ~/Desktop/screens/firefoxtest/$site.jpg;
      echo "Captured screenshot"
      echo "Close browser window"
      pkill -f "Firefox"; # Kill firefox
      sleep 2; # Give the browser a couple seconds to close
      echo "   ";
done
