#!/bin/sh

# Some preferences in Firefox that should be modified before using this script
# The script kills the browser's process in OSX, Firefox thinks it has crashed
# This is to prevent tabs from building up when running large batches of sites
# The utility GetWindowID is used in this script https://github.com/smokris/GetWindowID

# browser.sessionstore.max_resumed_crashes
# browser.sessionstore.resume_from_crash
# toolkit.startup.max_resumed_crashes
# browser.tabs.crashReporting.sendReport

h=$"http://"
list=(Baidu.com
tieba.baidu.com
zhidao.baidu.com
image.baidu.com
baike.baidu.com
wenku.baidu.com
pan.baidu.com
news.baidu.com
app.baidu.com
tongji.baidu.com
jingyan.baidu.com
Qq.com
qzone.qq.com
house.qq.com
news.qq.com
weixin.qq.com
mail.qq.com
t.qq.com
aq.qq.com
v.qq.com
exmail.qq.com
im.qq.com
Taobao.com
bbs.taobao.com
s.taobao.com
world.taobao.com
login.taobao.com
m.taobao.com
cart.taobao.com
Sina.com.cn
blog.sina.com.cn
news.sina.com.cn
sports.sina.com.cn
house.sina.com.cn
book.sina.com.cn
login.sina.com.cn
finance.sina.com.cn
m.sina.com.cn
ent.sina.com.cn
Weibo.com
s.weibo.com
open.weibo.com
e.weibo.com
desktop.weibo.com
help.weibo.com
photo.weibo.com
verified.weibo.com
account.weibo.com
passport.weibo.com
hao123.com
movie.hao123.com
m.hao123.com
tv.hao123.com
soft.hao123.com
v.hao123.com
pic.hao123.com
news.hao123.com
jp.hao123.com
history.gmw.cn
culture.gmw.cn
news.gmw.cn
tech.gmw.cn
photo.gmw.cn
edu.gmw.cn
yangsheng.gmw.cn
skype.gmw.cn
gmw.cn
reader.gmw.cn
tmall.com
watsons.tmall.com
adidas.tmall.com
chaoshi.tmall.com
list.tmall.com
world.tmall.com
1111.tmall.com
360.cn
hao.360.cn
yunpan.360.cn
v.360.cn
se.360.cn
xiaoshuo.360.cn
e.360.cn
yule.360.cn
xiaoyouxi.360.cn
i.360.cn
sohu.com
tv.sohu.com
women.sohu.com
t.sohu.com
news.sohu.com
sports.sohu.com
mt.sohu.com
auto.sohu.com
mil.sohu.com
business.sohu.com
chinadaily.com.cn
cnews.Chinadaily.com.cn
pic.Chinadaily.com.cn
top.Chinadaily.com.cn
cn.chinadaily.com.cn
world.Chinadaily.com.cn
m.chinadaily.com.cn
ent.Chinadaily.com.cn
language.Chinadaily.com.cn
china.Chinadaily.com.cn
item.jd.com
search.jd.com
jd.com
list.jd.com
cart.jd.com
shop.jd.com
order.jd.com
re.jd.com
bbs.tianya.cn
blog.tianya.cn
wenda.tianya.cn
tianya.cn
focus.tianya.cn
yamen3.tianya.cn
hnproj.tianya.cn
passport.tianya.cn
laiba.tianya.cn
soso.com
wenwen.soso.com
map.soso.com
baike.soso.com
image.soso.com
help.soso.com
video.soso.com
xinhuanet.com
news.xinhuanet.com
sd.xinhuanet.com
cntv.cn
tv.cntv.cn
cctv.cntv.cn
sports.cntv.cn
news.cntv.cn
mail.google.com
google.com
accounts.google.com
docs.google.com
translate.google.com
analytics.google.com
drive.google.com
calendar.google.com
plus.google.com
adwords.google.com
d.youth.cn
fun.youth.cn
society.youth.cn
news.youth.cn
picture.youth.cn
sd.youth.cn
google.com.hk
translate.Google.com.hk
images.google.com.hk
news.google.com.hk
scholar.Google.com.hk
books.google.com.hk
360.com
news.163.com
mail.163.com
reg.163.com
sports.163.com
ent.163.com
firefox.163.com
163.com
money.163.com
music.163.com
qiye.163.com
haosou.com
youku.com
v.youku.com
i.youku.com
list.youku.com
ding.youku.com
static.youku.com
tv.youku.com
movie.youku.com
zy.youku.com
actives.youku.com
sogou.com
weixin.sogou.com
123.sogou.com
haha.sogou.com
pic.sogou.com
v.sogou.com
ie.sogou.com
kan.sogou.com
wenwen.sogou.com
baike.sogou.com
cashiergtj.Alipay.com
cashiersu18.Alipay.com
cashierzth.Alipay.com
cashierzui.Alipay.com
auth.alipay.com
excashier.alipay.com
icashier.alipay.com
authgtj.alipay.com
my.alipay.com
shenghuo.alipay.com
amazon.cn
mai.amazon.cn
kaidian.amazon.cn
vendorcentral.Amazon.cn
haimai.amazon.cn
catalog-sc.amazon.cn
dropship.amazon.cn
browserapps.Amazon.cn
transportation.Amazon.cn
military.china.com
club.china.com
news.china.com
3g.china.com
m.china.com
blog.china.com
sports.china.com
game.china.com
ent.china.com
culture.china.com
china.com.cn
finance.china.com.cn
news.china.com.cn
jiangsu.china.com.cn
henan.china.com.cn
ent.china.com.cn
auto.china.com.cn
guoqing.china.com.cn
cppcc.china.com.cn
tech.china.com.cn
bilibili.com
search.bilibili.com
bangumi.bilibili.com
live.bilibili.com
space.bilibili.com
passport.Bilibili.com
message.bilibili.com
account.bilibili.com
member.bilibili.com
bml.bilibili.com
tmall.Detail.tmall.com
detail.tmall.com
watsons.Detail.tmall.com
adidas.Detail.tmall.com
chaoshi.Detail.tmall.com
list.Detail.tmall.com
buy.Detail.tmall.com
world.Detail.tmall.com
trade.Detail.tmall.com
1111.Detail.tmall.com
tudou.com
cartoon.tudou.com
v.tudou.com
so.com
wenda.so.com
image.so.com
baike.so.com
ly.so.com
music.so.com
news.so.com
ditu.so.com
zhanzhang.so.com
map.so.com
cnzz.com
tongji.cnzz.com
s138.cnzz.com
data.cnzz.com
bbs.cnzz.com
doc.cnzz.com
new.cnzz.com
rd.cnzz.com
zhihu.com
zhuanlan.zhihu.com
link.zhihu.com
daily.zhihu.com
liukanshan.zhihu.com
bing.com
cn.bing.com
global.bing.com
news.ifeng.com
v.ifeng.com
ifeng.com
ent.ifeng.com
finance.ifeng.com
auto.ifeng.com
tech.ifeng.com
sports.ifeng.com
blog.ifeng.com
fashion.ifeng.com
iqiyi.com
so.iqiyi.com
list.iqiyi.com
vip.iqiyi.com
passport.iqiyi.com
lego.iqiyi.com
4399.iqiyi.com
yule.iqiyi.com
baidu.iqiyi.com
7k7k.iqiyi.com
zol.com.cn
detail.zol.com.cn
bbs.zol.com.cn
xiazai.zol.com.cn
mobile.zol.com.cn
desk.zol.com.cn
news.zol.com.cn
vga.zol.com.cn
ask.zol.com.cn
nb.zol.com.cn
amazon.com
smile.amazon.com
sellercentral.Amazon.com
aws.amazon.com
sellercentral-japan.Amazon.com
sellercentral-europe.Amazon.com
phonetool.amazon.com
tt.amazon.com
affiliate-program.Amazon.com
w.amazon.com
51.la
top.51.la
babytree.com
douyu.com
wan.douyu.com
pay.douyu.com
yuba.douyu.com
google.cn
translate.google.cn
video.google.cn
ditu.google.cn
images.google.cn
xywy.com
club.xywy.com
huanqiu.com
firefox.huanqiu.com
china.huanqiu.com
world.huanqiu.com
mil.huanqiu.com
society.huanqiu.com
tech.huanqiu.com
taiwan.huanqiu.com
finance.huanqiu.com
oversea.huanqiu.com
wap.yesky.com
pic.yesky.com
mydown.yesky.com
product.yesky.com
mobile.yesky.com
sony.yesky.com
m.yesky.com
gameonline.yesky.com
yesky.com
news.yesky.com
bitauto.com
car.bitauto.com
news.bitauto.com
photo.bitauto.com
baa.bitauto.com
dealer.bitauto.com
v.bitauto.com
tech.bitauto.com
Caijing.com.cn
detail.1688.com
s.1688.com
work.1688.com
1688.com
login.1688.com
trade.1688.com
order.1688.com
offer.1688.com
baike.1688.com
p4psearch.1688.com
cart.1688.com
1905.com
news.ifeng.com
v.news.ifeng.com
ent.news.ifeng.com
ifeng.news.ifeng.com
finance.news.ifeng.com
auto.news.ifeng.com
tech.news.ifeng.com
sports.news.ifeng.com
blog.news.ifeng.com
fashion.news.ifeng.com
book.news.ifeng.com
douban.movie.douban.com
movie.douban.com
book.movie.douban.com
music.movie.douban.com
site.movie.douban.com
dongxi.movie.douban.com
read.movie.douban.com
accounts.movie.douban.com
dapps.movie.douban.com
intra.movie.douban.com
m.movie.douban.com
blog.news.sina.com.cn
news.sina.com.cn
sports.news.sina.com.cn
house.news.sina.com.cn
book.news.sina.com.cn
login.news.sina.com.cn
sina.news.sina.com.cn
finance.news.sina.com.cn
m.news.sina.com.cn
ent.news.sina.com.cn
tech.news.sina.com.cn
qzone.news.qq.com
house.news.qq.com
news.qq.com
weixin.news.qq.com
t.news.qq.com
mail.news.qq.com
aq.news.qq.com
v.news.qq.com
im.news.qq.com
exmail.news.qq.com
ent.news.qq.com
news.163.com
mail.news.163.com
reg.news.163.com
sports.news.163.com
ent.news.163.com
firefox.news.163.com
163.news.163.com
money.news.163.com
music.news.163.com
qiye.news.163.com
auto.news.163.com
bbs.tianya.cn
blog.tianya.cn
wenda.tianya.cn
tianya.cn
focus.tianya.cn
yamen3.tianya.cn
hnproj.tianya.cn
passport.tianya.cn
useradmin.tianya.cn
laiba.tianya.cn
search.tianya.cn
blog.sports.sina.com.cn
news.sports.sina.com.cn
sports.sina.com.cn
house.sports.sina.com.cn
book.sports.sina.com.cn
login.sports.sina.com.cn
sina.sports.sina.com.cn
finance.sports.sina.com.cn
m.sports.sina.com.cn
ent.sports.sina.com.cn
tech.sports.sina.com.cn
yidianzixun.com
mp.yidianzixun.com
qzone.sports.qq.com
house.sports.qq.com
news.sports.qq.com
weixin.sports.qq.com
t.sports.qq.com
mail.sports.qq.com
aq.sports.qq.com
v.sports.qq.com
im.sports.qq.com
exmail.sports.qq.com
ent.sports.qq.com
mama.cn
91baby.mama.cn
m.mama.cn
q.mama.cn
blog.csdn.net
bbs.csdn.net
download.csdn.net
csdn.net
passport.csdn.net
geek.csdn.net
lib.csdn.net
my.csdn.net
edu.csdn.net
ask.csdn.net
so.csdn.net
39.net
news.39.net
ask.39.net
blog.39.net
yyk.39.net
baby.39.net
jbk.39.net
fitness.39.net
jianfei.39.net
51yes.com
cnnic.cn
enet.com.cn
auto.enet.com.cn
product.enet.com.cn
pass.enet.com.cn
download.enet.com.cn
bbs.enet.com.cn
games.enet.com.cn
sports.eastday.com
mini.eastday.com
enjoy.eastday.com
news.eastday.com
eastday.com
mil.eastday.com
xinwen.eastday.com
sh.eastday.com
wmzsjs.eastday.com
alibaba.com
offer.alibaba.com
en.alibaba.com
message.alibaba.com
sourcing.alibaba.com
hz-productposting.Alibaba.com
exporter.alibaba.com
login.alibaba.com
job.alibaba.com
china.alibaba.com
onetouch.alibaba.com
microsoft.com
msdn.microsoft.com
support.Microsoft.com
technet.Microsoft.com
answers.Microsoft.com
account.Microsoft.com
bingads.Microsoft.com
privacy.Microsoft.com
azure.microsoft.com
go.microsoft.com
windows.Microsoft.com
youtube.com
accounts.youtube.com
xcar.com.cn
newcar.xcar.com.cn
photo.xcar.com.cn
my.xcar.com.cn
info.xcar.com.cn
drive.xcar.com.cn
dealer.xcar.com.cn
search.xcar.com.cn
k618.cn
news.k618.cn
ent.k618.cn
github.com
gist.github.com
help.github.com
codeload.github.com
desktop.github.com
guides.github.com
developer.github.com
education.github.com
facebook.com
apps.facebook.com
web.facebook.com
business.Facebook.com
m.facebook.com
developers.Facebook.com
l.facebook.com
es-la.facebook.com
staticxx.Facebook.com
fr-fr.facebook.com
suning.com
product.suning.com
search.suning.com
list.suning.com
shopping.suning.com
member.suning.com
sop.suning.com
order.suning.com
ju.suning.com
vip.suning.com
payment.suning.com
mail.yahoo.com
search.yahoo.com
yahoo.com
login.yahoo.com
news.yahoo.com
finance.yahoo.com
answers.yahoo.com
sports.yahoo.com
bid.yahoo.com
style.yahoo.com
fantasysports.Yahoo.com
acfun.tv
passport.acfun.tv
ci123.com
bb.ci123.com
bbs.ci123.com
news.ci123.com
baobao.ci123.com
user.ci123.com
ask.ci123.com
17ok.com
rednet.cn
bbs.rednet.cn
ask.rednet.cn
people.rednet.cn
hn.rednet.cn
cnblogs.com
news.cnblogs.com
q.cnblogs.com
zzk.cnblogs.com
home.cnblogs.com
kb.cnblogs.com
i.cnblogs.com
passport.cnblogs.com
wz.cnblogs.com
group.cnblogs.com
job.cnblogs.com
tmall.Adidas.tmall.com
detail.Adidas.tmall.com
watsons.Adidas.tmall.com
adidas.tmall.com
chaoshi.Adidas.tmall.com
list.Adidas.tmall.com
buy.Adidas.tmall.com
world.Adidas.tmall.com
1111.Adidas.tmall.com
trade.Adidas.tmall.com
pages.Adidas.tmall.com
panda.tv
stars.panda.tv
pay.panda.tv
message.panda.tv
gamersky.com
down.gamersky.com
ol.gamersky.com
shouyou.gamersky.com
acg.gamersky.com
bbs.gamersky.com
ku.gamersky.com
ow.gamersky.com
so.gamersky.com
web.gamersky.com
pic.gamersky.com
baike.com
tupian.baike.com
so.baike.com
h.baike.com
tmall.Chaoshi.tmall.com
detail.Chaoshi.tmall.com
watsons.Chaoshi.tmall.com
adidas.Chaoshi.tmall.com
chaoshi.tmall.com
list.Chaoshi.tmall.com
buy.Chaoshi.tmall.com
world.Chaoshi.tmall.com
1111.Chaoshi.tmall.com
trade.Chaoshi.tmall.com
pages.Chaoshi.tmall.com
tmall.List.tmall.com
detail.List.tmall.com
watsons.List.tmall.com
adidas.List.tmall.com
chaoshi.List.tmall.com
list.tmall.com
buy.List.tmall.com
world.List.tmall.com
1111.List.tmall.com
trade.List.tmall.com
pages.List.tmall.com
huaban.com
tmall.Watsons.tmall.com
detail.Watsons.tmall.com
watsons.tmall.com
adidas.Watsons.tmall.com
chaoshi.Watsons.tmall.com
list.Watsons.tmall.com
buy.Watsons.tmall.com
world.Watsons.tmall.com
1111.Watsons.tmall.com
trade.Watsons.tmall.com
pages.Watsons.tmall.com
sq.cn
yaolan.com
ask.yaolan.com
apple.com
itunes.apple.com
support.apple.com
developer.apple.com
itunesconnect.Apple.com
discussions.Apple.com
appleid.apple.com
store.apple.com
iforgot.apple.com
idmsa.apple.com
trailers.apple.com
en.wikipedia.org
ja.wikipedia.org
ru.wikipedia.org
de.wikipedia.org
es.wikipedia.org
fr.wikipedia.org
zh.wikipedia.org
it.wikipedia.org
pt.wikipedia.org
fa.wikipedia.org
pl.wikipedia.org
dict.youdao.com
note.youdao.com
fanyi.youdao.com
youdao.com
cidian.youdao.com
reg.youdao.com
f.youdao.com
dictapp.youdao.com
account.youdao.com
xue.youdao.com
at-test.youdao.com
cnmo.com
bbs.cnmo.com
product.cnmo.com
samsungbbs.cnmo.com
app.cnmo.com
iphonebbs.cnmo.com
alexa.cn
icp.alexa.cn
123cha.com
time.123cha.com
youboy.com
bbs.youboy.com
login.live.com
outlook.live.com
mail.live.com
onedrive.live.com
account.live.com
profile.live.com
office.live.com
signup.live.com
officeapps.live.com
live.com
people.live.com
jrj.com.cn
finance.jrj.com.cn
bbs.jrj.com.cn
pic.jrj.com.cn
stock.jrj.com.cn
zhibo.jrj.com.cn
money.jrj.com.cn
istock.jrj.com.cn
summary.jrj.com.cn
itougu.jrj.com.cn
8.jrj.com.cn
console.Aliyun.com
account.Aliyun.com
qiye.Aliyun.com
aliyun.Aliyun.com
mail.Aliyun.com
help.Aliyun.com
wanwang.Aliyun.com
dc.Aliyun.com
whois.Aliyun.com
market.Aliyun.com
dms-rds.Aliyun.com)

for i in "${!list[@]}"; do
      echo "Open new browser window";
      open -a "Firefox"; # Open Firefox
      sleep 4; # Wait for browser to load
      echo "Get window ID for screenshot";
      gcwindow=$(./GetWindowID "Firefox" "Mozilla Firefox"); # Window ID is needed for screenshot, current ID depends on what your start page is set to
      echo $gcwindow;
      site="${list[$i]}";
      sleep 1; # Not sure this pause is needed anymore
      echo "Opening Site #"$i;
      echo $site;
      address=$h$site;
      open -a "Firefox" $address; # Open the address in Firefox
      echo "Wait for page load..";
      # Screencapture has a timer built in, 40 seconds in this case, adjust this and path as required
      # If testing pages other than domain root change $site to something else like $i for example
      screencapture -t jpg -T 40 -l $gcwindow -x ~/Desktop/screens/firefoxtest/$site.jpg;
      echo "Captured screenshot"
      echo "Close browser window"
      pkill -f "Firefox"; # Kill firefox
      sleep 2; # Give the browser a couple seconds to close
      echo "   ";
done
